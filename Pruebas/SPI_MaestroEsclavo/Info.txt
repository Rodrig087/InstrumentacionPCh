1. Al presionar el pulsante HS_Int el dispositivo HS envia una trama de datos valida por el puerto UART.
2. El dispositivo EComunicacion detecta la trama a travez de una interrupcion por UART, y tras comprobar su integridad mediante el CRC, devuelve un ACK al HS y envia una trama de datos (mas pequeña) al dispositivo ESensor a travez del puerto SPI.
3. El dispositivo ESensor recibe la trama SPI en un bucle, y mediante la activacion de una bandera indica si se trata de una peticion o una solicitud de respuesta, entonces simula la solicitud mediante un Delay y cuando la tiene lista notifica al disositivo EComunicacion mediante un pulso en alto.
4. El dispositivo EComunicacion detecta el pulso en alto mediante una interrupcion externa, entonces envia un byte cualquiera al ESensor para establecer una nueva comunicacion.
5. El dispositivo ESensor detecta una nueva peticion SPI por medio de un bucle, mediante la bandera determina si se trata de una peticion o una solicitud de respuesta. En caso de ser una solicitud de respuesta, coloca un byte que se incrementa en cada solicitud en el buffer de salida, despues lo envia y limpia la bandera.
6. Al mismo tiempo el EComunicacion recibe el byte de respuesta en una comunicacion full-duplex almacenando en una variable el valor del buffer. Despues envia ese valor a travez del UART y termina hasta que se vuelva a enviar una nueva solicitud como se explica en el punto 1.